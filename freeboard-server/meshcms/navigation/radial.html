<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>Wind</title>
<meta http-equiv="content-type" content="text/html; charset=utf-8" />
<title>multiInstrument : Built with Processing and Processing.js</title>
<link rel="icon" type="image/x-icon"
	href="data:image/x-icon;base64,AAABAAEAEBAQAAEABAAoAQAAFgAAACgAAAAQAAAAIAAAAAEABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAQAAVzABAEAjBQAaDwYAWjUGAGE6CQBrQQ0ATS8PAFhAJwBUQC8AbFI6AHVXPACBZk4A4NrWAPb19QAAAAAAAMmZmZmZmgAJIwAAAAAAcMIjPjA+PjAKpxIuMDMzMAm0Ii4zMzMACaIiLt3dMAAJtyIuIzPQAAm0Un5yM+IzKLRkfncy4iIotRF+dyLkIiq0QX53F+EiGrQUTkd34iIatEVu7u5iIVrBVVRBRFRVbAtGZGZla2uwAMu7u7u8vADAAwAAgAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIABAADAAwAA" />

<style type="text/css">
body {
	background-color: #333;
	color: #bbb;
	line-height: normal;
	font-family: Lucida Grande, Lucida Sans, Arial, Helvetica Neue, Verdana,
		Geneva, sans-serif;
	font-size: 11px;
	font-weight: normal;
	text-decoration: none;
	line-height: 1.5em;
}

a img {
	border: 0px solid transparent;
}

a,a:link,a:visited,a:active,a:hover {
	color: #cdcdcd;
	text-decoration: underline;
}

h1 {
	font-family: Arial, Helvetica Neue, Verdana, Geneva, sans-serif;
	width: 100%;
	letter-spacing: 0.1em;
	margin-bottom: 1em;
	font-size: 1.65em;
}

canvas {
	display: block;
	outline: 0px;
	margin-bottom: 1.5em;
}

#content {
	margin: 50px auto 0px auto;
	padding: 25px 25px 15px 25px;
	width: 640px;
	min-width: 300px;
	overflow: auto;
	border-left: 1px solid #444;
	border-top: 1px solid #444;
	border-right: 1px solid #333;
	border-bottom: 1px solid #333;
	background-color: #3d3d3d;
}
</style>
<!--[if lt IE 9]>
			<script type="text/javascript">alert("Your browser does not support the canvas tag.");</script>
		<![endif]-->

<script src="../js/jquery-1.8.2.min.js" type="text/javascript"></script>
<script src="../js/tween-min.js"></script>
<script src="../js/steelseries-min.js"></script>

</head>
<body >
	<div id="content">
		<a href="multiInstrument.html">Multi Gauge</a>
		<table>
			
			<tr>
				<td><canvas id="canvasWindApp" width="201" height="201">No
					canvas in your browser...sorry...</canvas>
				</td>
				<td><canvas id="canvasWindDirApp" width="201" height="201"></canvas>
				</td>
				<td><canvas id="canvasWindClose" width="201" height="201"></canvas>
				</td>
			</tr>
			<tr>
				<td><canvas id="canvasLog" width="201" height="201"></canvas>
				</td>
				//wind dir - compass rose
				<td><canvas id="canvasWindDirTrue" width="201" height="201"></canvas>
				</td>
				<td><canvas id="canvasWindTrue" width="201" height="201"></canvas>
				</td>
				
			</tr>
		</table>
		<script type="text/javascript">
			var radialLog, radialWindTrue, radialWindDirTrue
			odoValue = 99998.2;

			function init() {

				// Define some sections for wind
				var sections = [
						steelseries.Section(0, 20, 'rgba(0, 0, 220, 0.3)'),
						steelseries.Section(20, 35, 'rgba(0, 220, 0, 0.3)'),
						steelseries.Section(35, 75, 'rgba(220,0, 0, 0.3)') ],

				areasCloseHaul = [
						steelseries.Section(-45, 0, 'rgba(0, 0, 220, 0.3)'),
						steelseries.Section(0, 45, 'rgba(0, 0, 220, 0.3)') ],
				// Define one area
				areas = [ steelseries.Section(20, 25, 'rgba(220, 0, 0, 0.3)') ],

				// Define value gradient for bargraph
				valGrad = new steelseries.gradientWrapper(0, 25, [ 0, 0.33,
						0.66, 0.85, 1 ], [
						new steelseries.rgbaColor(0, 0, 200, 1),
						new steelseries.rgbaColor(0, 200, 0, 1),
						new steelseries.rgbaColor(200, 200, 0, 1),
						new steelseries.rgbaColor(200, 0, 0, 1),
						new steelseries.rgbaColor(200, 0, 0, 1) ]);

				// Initialzing gauges

				//log
				radialLog = new steelseries.Radial('canvasLog', {
					gaugeType : steelseries.GaugeType.TYPE4,
					size : 201,
					maxValue : 25,
					threshold : 15,
					//section: sections,
					//area: areas,
					titleString : "LOG",
					unitString : "knots",
					lcdVisible : true
				});

				

				//wind app
				//wind
				radialWindApp = new steelseries.Radial('canvasWindApp', {
					gaugeType : steelseries.GaugeType.TYPE4,
					size : 201,
					minValue : 0,
					maxValue : 60,
					threshold : 35,
					section : sections,
					//area: areas,
					titleString : "WIND APPARENT",
					unitString : "knots",
					lcdVisible : true
				});
				//make a web socket
				var location = "ws://localhost:9090/navData"
				this._ws = new WebSocket(location);
				this._ws.onopen = function() {
				};
				this._ws.onmessage = function(m) {
					if (m.data && m.data.indexOf('WNDT') >= 0) {
						var c = m.data.substring(m.data.indexOf('WNDT') + 5);
						radialWindApp.setValueAnimated(c);
					}
				};
				this._ws.onclose = function() {
					this._ws = null;
				};

				//wind dir
				radialWindDirApp = new steelseries.Radial('canvasWindDirApp', {
					gaugeType : steelseries.GaugeType.TYPE4,
					size : 201,
					titleString : "WIND     APP.",
					area : areasCloseHaul,
					minValue : -180,
					maxValue : 180,
					thresholdVisible : false,
					lcdVisible : false
				});
				radialWindDirApp.setValue(0);
				radialWindClose = new steelseries.Radial('canvasWindClose', {
					gaugeType : steelseries.GaugeType.TYPE4,
					size : 201,
					minValue : -70,
					maxValue : 70,
					//threshold : 35,
					//section : sectionsCloseHaul,
					area : areasCloseHaul,
					titleString : "CLOSE  HAUL ",
					unitString : "deg",
					lcdVisible : false
				});
				radialWindClose.setValue(0);

				//wind true
				radialWindTrue = new steelseries.Radial('canvasWindTrue', {
					gaugeType : steelseries.GaugeType.TYPE4,
					size : 201,
					maxValue : 60,
					threshold : 35,
					section : sections,
					//area: areas,
					titleString : "WIND TRUE",
					unitString : "knots",
					lcdVisible : true
				});
				
				//wind dir
				radialWindDirTrue = new steelseries.WindDirection(
						'canvasWindDirTrue', {
							size : 201,
							titleString : "WIND     TRUE",
							roseVisible : false,
							lcdVisible : true
						});
				//make a web socket
				var location = "ws://localhost:9090/navData"
				this._ws = new WebSocket(location);
				this._ws.onopen = function() {
				};
				this._ws.onmessage = function(m) {
					if (m.data && m.data.indexOf('LOG') >= 0) {
						var c = m.data.substring(m.data.indexOf('LOG') + 4);
						radialLog.setValueAnimated(c);
					}
					if (m.data && m.data.indexOf('WNDA') >= 0) {
						var c = m.data.substring(m.data.indexOf('WNDA') + 5);
						radialWindApp.setValueAnimated(c);
					}
					if (m.data && m.data.indexOf('WNDDA') >= 0) {
						var c = m.data.substring(m.data.indexOf('WNDDA') + 6);
						radialWindDirApp.setValueAnimated(c);
						radialWindClose.setValueAnimated(c);
					}
				};
				this._ws.onclose = function() {
					this._ws = null;
				};
			}
            init();
		</script>
</body>
</html>